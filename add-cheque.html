<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Cheque - ARG Distributor</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/add-cheque.css">
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <span>A R G Distributor pvt LTD</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-item">
                <a href="dashboard.html" class="nav-link">
                    <i class="nav-icon fas fa-home"></i>
                    <span class="nav-text">Dashboard</span>
                </a>
            </div>
            <div class="nav-item expanded">
                <a href="#" class="nav-link" id="chequeOpsToggle">
                    <i class="nav-icon fas fa-file-invoice"></i>
                    <span class="nav-text">Cheque Operations</span>
                    <i class="nav-arrow fas fa-chevron-down"></i>
                </a>
                <div class="submenu" id="chequeOpsSubmenu">
                    <a href="in-cheques.html" class="submenu-link">
                        <i class="submenu-icon fas fa-arrow-down"></i>
                        <span class="submenu-text">IN Cheques</span>
                    </a>
                    <a href="out-cheques.html" class="submenu-link">
                        <i class="submenu-icon fas fa-arrow-up"></i>
                        <span class="submenu-text">OUT Cheques</span>
                    </a>
                    <a href="add-cheque.html" class="submenu-link active">
                        <i class="submenu-icon fas fa-plus"></i>
                        <span class="submenu-text">Add Cheque</span>
                    </a>
                    <a href="print-cheque.html" class="submenu-link">
                        <i class="submenu-icon fas fa-print"></i>
                        <span class="submenu-text">Print Cheque</span>
                    </a>
                </div>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" id="scheduleToggle">
                    <i class="nav-icon fas fa-calendar-alt"></i>
                    <span class="nav-text">Schedule & Tracking</span>
                    <i class="nav-arrow fas fa-chevron-down"></i>
                </a>
                <div class="submenu" id="scheduleSubmenu">
                    <a href="#" class="submenu-link">
                        <i class="submenu-icon fas fa-calendar-day"></i>
                        <span class="submenu-text">Daily Schedule</span>
                    </a>
                    <a href="#" class="submenu-link">
                        <i class="submenu-icon fas fa-receipt"></i>
                        <span class="submenu-text">Expected Receipts</span>
                    </a>
                    <a href="#" class="submenu-link">
                        <i class="submenu-icon fas fa-users"></i>
                        <span class="submenu-text">Third Party Transfers</span>
                    </a>
                </div>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="nav-icon fas fa-chart-bar"></i>
                    <span class="nav-text">Reports</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" id="bankToggle">
                    <i class="nav-icon fas fa-university"></i>
                    <span class="nav-text">Bank Management</span>
                    <i class="nav-arrow fas fa-chevron-down"></i>
                </a>
                <div class="submenu" id="bankSubmenu">
                    <a href="#" class="submenu-link">
                        <i class="submenu-icon fas fa-building"></i>
                        <span class="submenu-text">Banks</span>
                    </a>
                    <a href="#" class="submenu-link">
                        <i class="submenu-icon fas fa-code-branch"></i>
                        <span class="submenu-text">Bank Branches</span>
                    </a>
                </div>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="nav-icon fas fa-users-cog"></i>
                    <span class="nav-text">User Management</span>
                    <i class="nav-arrow fas fa-chevron-down"></i>
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="nav-icon fas fa-user-circle"></i>
                    <span class="nav-text">Profile</span>
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-logo">
                    <span>A R G Distributor pvt LTD</span>
                </div>
            </div>

            <div class="header-right">
                <span class="welcome-text">Welcome, Admin</span>
                <button class="logout-btn" onclick="window.location.href='index.html'">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </header>

        <!-- Page Content -->
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header-section">
                <div>
                    <h1 class="page-title">Add New Cheque</h1>
                    <p class="page-description">Enter the details of the new cheque</p>
                </div>
            </div>

            <!-- Form Section -->
            <div class="form-section">
                <div class="form-accent"></div>
                
                <form id="addChequeForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-exchange-alt"></i>
                                Cheque Direction <span class="required">*</span>
                            </label>
                            <select class="form-control" id="chequeDirection" required>
                                <option value="">Select direction</option>
                                <option value="in">IN Cheque</option>
                                <option value="out" selected>OUT Cheque</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar"></i>
                                Cheque Date <span class="required">*</span>
                            </label>
                            <input type="date" class="form-control" id="chequeDate" value="2025-12-16" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-money-bill"></i>
                                Amount (LKR) <span class="required">*</span>
                            </label>
                            <input type="number" class="form-control" id="amount" placeholder="0.00" step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-hashtag"></i>
                                Cheque Number <span class="required">*</span>
                            </label>
                            <input type="text" class="form-control" id="chequeNumber" placeholder="e.g., 123456" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-university"></i>
                                Bank <span class="required">*</span>
                            </label>
                            <select class="form-control" id="bank" required>
                                <option value="">Search banks by name or code...</option>
                                <option value="boc">Bank of Ceylon</option>
                                <option value="commercial">Commercial Bank of Ceylon</option>
                                <option value="hnb">Hatton National Bank</option>
                                <option value="sampath">Sampath Bank</option>
                                <option value="seylan">Seylan Bank</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-code-branch"></i>
                                Branch <span class="required">*</span>
                            </label>
                            <select class="form-control" id="branch" required disabled>
                                <option value="">Select a bank first, then search branches...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user"></i>
                                Payee Name <span class="required">*</span>
                            </label>
                            <input type="text" class="form-control" id="payeeName" placeholder="Enter payee name" required>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">
                            <i class="fas fa-sticky-note"></i>
                            Notes
                        </label>
                        <textarea class="form-control" id="notes" rows="4" placeholder="Additional notes (optional)"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-save"></i>
                            Add Cheque
                        </button>
                        <button type="button" class="btn-cancel" onclick="window.history.back()">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Sidebar Toggle
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');

        sidebarToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('show');
            } else {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
            }
        });

        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 768) {
                if (!sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
                    sidebar.classList.remove('show');
                }
            }
        });

        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('show');
            }
        });

        // Submenu Toggle
        const chequeOpsToggle = document.getElementById('chequeOpsToggle');
        const chequeOpsItem = chequeOpsToggle.closest('.nav-item');

        const scheduleToggle = document.getElementById('scheduleToggle');
        const scheduleItem = scheduleToggle.closest('.nav-item');

        const bankToggle = document.getElementById('bankToggle');
        const bankItem = bankToggle.closest('.nav-item');

        chequeOpsToggle.addEventListener('click', (e) => {
            e.preventDefault();
            chequeOpsItem.classList.toggle('expanded');
        });

        scheduleToggle.addEventListener('click', (e) => {
            e.preventDefault();
            scheduleItem.classList.toggle('expanded');
        });

        bankToggle.addEventListener('click', (e) => {
            e.preventDefault();
            bankItem.classList.toggle('expanded');
        });

        // Bank selection enables branch dropdown
        const bankSelect = document.getElementById('bank');
        const branchSelect = document.getElementById('branch');

        bankSelect.addEventListener('change', function() {
            if (this.value) {
                branchSelect.disabled = false;
                // Populate branches based on selected bank (dummy data)
                branchSelect.innerHTML = `
                    <option value="">Select branch...</option>
                    <option value="001">Main Branch - 001</option>
                    <option value="002">City Branch - 002</option>
                    <option value="118">Colombo 118</option>
                `;
            } else {
                branchSelect.disabled = true;
                branchSelect.innerHTML = '<option value="">Select a bank first, then search branches...</option>';
            }
        });

        // Form submission
        const form = document.getElementById('addChequeForm');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                direction: document.getElementById('chequeDirection').value,
                date: document.getElementById('chequeDate').value,
                amount: document.getElementById('amount').value,
                chequeNumber: document.getElementById('chequeNumber').value,
                bank: document.getElementById('bank').value,
                branch: document.getElementById('branch').value,
                payeeName: document.getElementById('payeeName').value,
                notes: document.getElementById('notes').value
            };

            console.log('Cheque Data:', formData);
            alert('Cheque added successfully! (This is a demo)');
            
            // Redirect based on cheque direction
            if (formData.direction === 'in') {
                window.location.href = 'in-cheques.html';
            } else {
                window.location.href = 'in-cheques.html'; // Change to out-cheques.html when created
            }
        });

        console.log('Add Cheque page loaded successfully!');
    </script>
</body>

</html>
